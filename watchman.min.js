!function(e,r){var n="undefined"!=typeof define,t="undefined"!=typeof exports;n?define(e,[],r):t?exports=r(require,exports,module):this[e]=r()}("watchman",function(){function e(n,t){if(!(arguments.length<2)){e.hasOwnProperty("_watching")||(e._watching=[]);var a=r(n,t);return e._watching.push(a),e}if(0===arguments.length)return e.run();switch(typeof n){case"object":for(var i in n)e(i,n[i]);break;case"string":e.run({url:n})}}function r(e,r){var t=n(e);return t.handler=r,t}function n(e){if(e instanceof RegExp)return{keys:[],regexp:e};e instanceof Array&&(e="("+e.join("|")+")");var r={keys:[],regexp:null};return r.regexp=new RegExp("^"+(a(e)?"/":"")+e.replace(/([\/\(]+):/g,"(?:").replace(/\(\?:(\w+)((\(.*?\))*)/g,function(e,r,n){if(n)var t=n.replace(/\(|\)/g,"");else var t="/?([^/]+)";return"(?:"+t+"?)"}).replace("))",")").replace(/\*/g,"(.*)")+"$","i"),r}function t(e,r){for(var n=r.regexp.exec(e).slice(1),t=r.keys,a={},i=0;i<t.length;i++)a[t[i]]=n[i];return a}function a(e){return/^#/.test(e)}function i(e){for(var r=[],n=0;n<e.length;n++)r.push(e[n]);return r}var u=u||window;return e.use=function(){e.hasOwnProperty("_watchman_middlewares")||(e._watchman_middlewares=[]);var r=i(arguments);return Array.prototype.push.apply(e._watchman_middlewares,r),e},e.run=function(r){function n(r){var t=e._watchman_middlewares[r];t?t(s,function(){n(++p)}):f(s)}r=r||{};for(var a=r.url||u.location.pathname+u.location.hash,i=e._watching,c=0;c<i.length;c++)if(i[c].regexp.exec(a)){var o=t(a,i[c]),s={params:o},f=i[c].handler;if(e.hasOwnProperty("_watchman_middlewares")){var p=0;n(p)}else f(s)}return e},e});
